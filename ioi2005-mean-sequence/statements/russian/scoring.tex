Вы можете считать, что в тестах стоимостью 50 \% баллов  $n \le 1000$ и $0 \le m_i \le 20000$.
